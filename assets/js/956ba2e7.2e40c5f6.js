"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[2536],{3286:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>s,toc:()=>a});const s=JSON.parse('{"id":"guides/configuration","title":"Configuration","description":"Complete configuration guide for Bethrou: client config, node setup, environment variables, TOML/YAML configuration, PSK management, and advanced network options.","source":"@site/docs/guides/configuration.md","sourceDirName":"guides","slug":"/guides/configuration","permalink":"/docs/guides/configuration","draft":false,"unlisted":false,"editUrl":"https://github.com/bethrou/bethrou/tree/main/docs/docs/guides/configuration.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"title":"Configuration","description":"Complete configuration guide for Bethrou: client config, node setup, environment variables, TOML/YAML configuration, PSK management, and advanced network options.","keywords":["configuration","setup","TOML","YAML","environment variables","advanced setup","network configuration"],"image":"../../img/bethrou-icon.svg"},"sidebar":"docsSidebar","previous":{"title":"Quick Start","permalink":"/docs/getting-started/quick-start"},"next":{"title":"Local Deployment","permalink":"/docs/guides/deployment-local"}}');var o=i(4848),r=i(8453);const t={sidebar_position:1,title:"Configuration",description:"Complete configuration guide for Bethrou: client config, node setup, environment variables, TOML/YAML configuration, PSK management, and advanced network options.",keywords:["configuration","setup","TOML","YAML","environment variables","advanced setup","network configuration"],image:"../../img/bethrou-icon.svg"},l="Configuration Guide",d={},a=[{value:"Configuration Overview",id:"configuration-overview",level:2},{value:"Network Key Setup",id:"network-key-setup",level:2},{value:"Basic Configuration",id:"basic-configuration",level:2},{value:"Minimal Client",id:"minimal-client",level:3},{value:"Minimal Node",id:"minimal-node",level:3},{value:"Common Scenarios",id:"common-scenarios",level:2},{value:"Single Exit Node",id:"single-exit-node",level:3},{value:"Multiple Exit Nodes",id:"multiple-exit-nodes",level:3},{value:"Dynamic Discovery",id:"dynamic-discovery",level:3},{value:"NAT Traversal",id:"nat-traversal",level:3},{value:"Routing Strategies",id:"routing-strategies",level:2},{value:"Random",id:"random",level:3},{value:"Round-Robin",id:"round-robin",level:3},{value:"Fastest",id:"fastest",level:3},{value:"Troubleshooting Configuration",id:"troubleshooting-configuration",level:2},{value:"Client can&#39;t connect to nodes",id:"client-cant-connect-to-nodes",level:3},{value:"Discovery not working",id:"discovery-not-working",level:3},{value:"Performance issues",id:"performance-issues",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Next Steps",id:"next-steps",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"configuration-guide",children:"Configuration Guide"})}),"\n",(0,o.jsx)(n.p,{children:"Comprehensive guide to configuring Bethrou for different use cases."}),"\n",(0,o.jsx)(n.h2,{id:"configuration-overview",children:"Configuration Overview"}),"\n",(0,o.jsx)(n.p,{children:"Bethrou has two components with different configuration approaches:"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Client"}),": Configured via YAML file (",(0,o.jsx)(n.code,{children:"client.yaml"}),")"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Node"}),": Configured via command-line flags"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"network-key-setup",children:"Network Key Setup"}),"\n",(0,o.jsx)(n.p,{children:"Generate and distribute the network key:"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:'# Generate once\necho "/key/swarm/psk/1.0.0/" > network.key\necho "/base16/" >> network.key\nopenssl rand -hex 32 >> network.key\n\n# Secure permissions\nchmod 600 network.key\n\n# Copy to all machines\nscp network.key user@client-host:~/\nscp network.key user@node-host:~/\n'})}),"\n",(0,o.jsx)(n.h2,{id:"basic-configuration",children:"Basic Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"minimal-client",children:"Minimal Client"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'key: "network.key"\n\nserver:\n  listen: "127.0.0.1:1080"\n  auth: false\n\nrouting:\n  strategy: random\n  health: 30s\n  timeout: 10s\n\nnodes:\n  - id: 12D3KooW...\n    addrs:\n      - /ip4/192.168.1.100/tcp/4000/p2p/12D3KooW...\n\ndiscovery:\n  enabled: false\n\nlog:\n  level: info\n  format: text\n'})}),"\n",(0,o.jsx)(n.h3,{id:"minimal-node",children:"Minimal Node"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"bethrou-node start --listen /ip4/0.0.0.0/tcp/4000\n"})}),"\n",(0,o.jsx)(n.h2,{id:"common-scenarios",children:"Common Scenarios"}),"\n",(0,o.jsx)(n.h3,{id:"single-exit-node",children:"Single Exit Node"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Use case:"})," Simple setup with one trusted exit node."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Client configuration:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'key: "network.key"\n\nserver:\n  listen: "127.0.0.1:1080"\n  auth: false\n\nrouting:\n  strategy: random\n  health: 30s\n  timeout: 10s\n\nnodes:\n  - id: 12D3KooWExample...\n    addrs:\n      - /ip4/203.0.113.50/tcp/4000/p2p/12D3KooWExample...\n\ndiscovery:\n  enabled: false\n\nlog:\n  level: info\n  format: text\n'})}),"\n",(0,o.jsx)(n.h3,{id:"multiple-exit-nodes",children:"Multiple Exit Nodes"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Use case:"})," Redundancy and load balancing."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Client configuration:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'key: "network.key"\n\nserver:\n  listen: "127.0.0.1:1080"\n  auth: false\n\nrouting:\n  strategy: round-robin\n  health: 30s\n  timeout: 15s\n\nnodes:\n  - id: 12D3KooWNode1...\n    addrs:\n      - /ip4/203.0.113.10/tcp/4000/p2p/12D3KooWNode1...\n  - id: 12D3KooWNode2...\n    addrs:\n      - /ip4/203.0.113.20/tcp/4000/p2p/12D3KooWNode2...\n  - id: 12D3KooWNode3...\n    addrs:\n      - /ip4/203.0.113.30/tcp/4000/p2p/12D3KooWNode3...\n\ndiscovery:\n  enabled: false\n\nlog:\n  level: info\n  format: text\n'})}),"\n",(0,o.jsx)(n.h3,{id:"dynamic-discovery",children:"Dynamic Discovery"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Use case:"})," Automatically discover available exit nodes."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Node:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"bethrou-node start \\\n  --listen /ip4/0.0.0.0/tcp/4000 \\\n  --discover \\\n  --discover-address redis://redis.example.com:6379 \\\n  --discover-topic bethrou-prod\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Client:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'key: "network.key"\n\nserver:\n  listen: "127.0.0.1:1080"\n  auth: false\n\nrouting:\n  strategy: fastest\n  health: 30s\n  timeout: 10s\n\nnodes: []\n\ndiscovery:\n  enabled: true\n  address: "redis://redis.example.com:6379"\n  topic: "bethrou-prod"\n  timeout: "10s"\n\nlog:\n  level: info\n  format: text\n'})}),"\n",(0,o.jsx)(n.h3,{id:"nat-traversal",children:"NAT Traversal"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.strong,{children:"Use case:"})," Clients or nodes behind NAT/firewall."]}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Public relay node:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"bethrou-node start \\\n  --listen /ip4/0.0.0.0/tcp/4000 \\\n  --relay-mode \\\n"})}),"\n",(0,o.jsx)(n.p,{children:(0,o.jsx)(n.strong,{children:"Client behind NAT:"})}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:'key: "network.key"\n\nserver:\n  listen: "127.0.0.1:1080"\n  auth: false\n\nrouting:\n  strategy: random\n  health: 30s\n  timeout: 10s\n\nnodes:\n  - id: 12D3KooWNode...\n    relay: /ip4/203.0.113.100/tcp/4000/p2p/12D3KooWRelay...\n\ndiscovery:\n  enabled: false\n\nlog:\n  level: info\n  format: text\n'})}),"\n",(0,o.jsx)(n.h2,{id:"routing-strategies",children:"Routing Strategies"}),"\n",(0,o.jsx)(n.h3,{id:"random",children:"Random"}),"\n",(0,o.jsx)(n.p,{children:"Best for: Load distribution"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"routing:\n  strategy: random\n"})}),"\n",(0,o.jsx)(n.h3,{id:"round-robin",children:"Round-Robin"}),"\n",(0,o.jsx)(n.p,{children:"Best for: Fair distribution"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"routing:\n  strategy: round-robin\n"})}),"\n",(0,o.jsx)(n.h3,{id:"fastest",children:"Fastest"}),"\n",(0,o.jsx)(n.p,{children:"Best for: Performance"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",children:"routing:\n  strategy: fastest\n  health: 30s  # Check latency every 30s\n"})}),"\n",(0,o.jsx)(n.h2,{id:"troubleshooting-configuration",children:"Troubleshooting Configuration"}),"\n",(0,o.jsx)(n.h3,{id:"client-cant-connect-to-nodes",children:"Client can't connect to nodes"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsx)(n.li,{children:"Verify node is running"}),"\n",(0,o.jsx)(n.li,{children:"Check peer ID matches"}),"\n",(0,o.jsx)(n.li,{children:"Verify network.key is identical"}),"\n",(0,o.jsxs)(n.li,{children:["Test connectivity: ",(0,o.jsx)(n.code,{children:"nc -zv node-ip 4000"})]}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"discovery-not-working",children:"Discovery not working"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Test Redis: ",(0,o.jsx)(n.code,{children:"redis-cli -h redis-host ping"})]}),"\n",(0,o.jsx)(n.li,{children:"Check topic names match"}),"\n",(0,o.jsx)(n.li,{children:"Verify authentication credentials"}),"\n",(0,o.jsx)(n.li,{children:"Enable debug logging"}),"\n"]}),"\n",(0,o.jsx)(n.h3,{id:"performance-issues",children:"Performance issues"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:["Use ",(0,o.jsx)(n.code,{children:"fastest"})," routing strategy"]}),"\n",(0,o.jsx)(n.li,{children:"Increase health check interval"}),"\n",(0,o.jsx)(n.li,{children:"Add more exit nodes"}),"\n",(0,o.jsx)(n.li,{children:"Check network latency"}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,o.jsxs)(n.ol,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Use HTTPS"}),": Always use HTTPS for sensitive traffic"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Secure keys"}),": Set ",(0,o.jsx)(n.code,{children:"network.key"})," permissions to 600"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Monitor logs"}),": Regularly review logs for issues"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Multiple nodes"}),": Use at least 2-3 exit nodes for redundancy"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Remote DNS"}),': Enable "Proxy DNS" in browser']}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.strong,{children:"Regular rotation"}),": Rotate network keys periodically"]}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/guides/deployment-local",children:"Deployment Guides"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/guides/nat-traversal",children:"NAT Traversal"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/reference/client-config",children:"Client Configuration Reference"})}),"\n",(0,o.jsx)(n.li,{children:(0,o.jsx)(n.a,{href:"/docs/reference/node-config",children:"Node Configuration Reference"})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);